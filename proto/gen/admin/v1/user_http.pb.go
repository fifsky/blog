// Code generated by protoc-gen-go-http. DO NOT EDIT.
// versions:
// protoc-gen-go-http v0.0.1

package adminv1

import (
	types "app/proto/gen/types"
	context "context"
	contract "github.com/goapt/grpc-http/contract"
	emptypb "google.golang.org/protobuf/types/known/emptypb"
	http "net/http"
)

// This is a compile-time assertion to ensure that this generated file
// is compatible with the kratos package it is being compiled against.
// context.contract.http.

// UserService 提供用户相关的接口
type UserServiceHTTPServer interface {
	// Create 创建用户
	Create(context.Context, *UserCreateRequest) (*types.IDResponse, error)
	// Get 获取用户详情
	Get(context.Context, *GetUserRequest) (*User, error)
	// List 获取用户列表
	List(context.Context, *UserListRequest) (*UserListResponse, error)
	// LoginUser 获取登录用户详情
	LoginUser(context.Context, *emptypb.Empty) (*User, error)
	// Status 更新用户状态
	Status(context.Context, *UserStatusRequest) (*emptypb.Empty, error)
	// Update 更新用户
	Update(context.Context, *UserUpdateRequest) (*types.IDResponse, error)
}

type UserService struct {
	server UserServiceHTTPServer
	mux    contract.ServeMux
	codec  contract.Codec
}

func (s *UserService) RegisterService() {
	s.mux.HandleFunc("POST /blog/admin/user/get", s.Get)
	s.mux.HandleFunc("POST /blog/admin/user/create", s.Create)
	s.mux.HandleFunc("POST /blog/admin/user/update", s.Update)
	s.mux.HandleFunc("POST /blog/admin/user/list", s.List)
	s.mux.HandleFunc("POST /blog/admin/user/status", s.Status)
	s.mux.HandleFunc("POST /blog/admin/loginuser", s.LoginUser)
}

func RegisterUserServiceHTTPServer(mux contract.ServeMux, codec contract.Codec, srv UserServiceHTTPServer) {
	s := &UserService{
		server: srv,
		mux:    mux,
		codec:  codec,
	}
	s.RegisterService()
}

func (s *UserService) Get(w http.ResponseWriter, r *http.Request) {
	var in GetUserRequest
	if err := s.codec.Decode(r, &in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	if err := s.codec.Validate(&in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	out, err := s.server.Get(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	s.codec.Encode(w, r, out)
	return
}

func (s *UserService) Create(w http.ResponseWriter, r *http.Request) {
	var in UserCreateRequest
	if err := s.codec.Decode(r, &in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	if err := s.codec.Validate(&in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	out, err := s.server.Create(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	s.codec.Encode(w, r, out)
	return
}

func (s *UserService) Update(w http.ResponseWriter, r *http.Request) {
	var in UserUpdateRequest
	if err := s.codec.Decode(r, &in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	if err := s.codec.Validate(&in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	out, err := s.server.Update(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	s.codec.Encode(w, r, out)
	return
}

func (s *UserService) List(w http.ResponseWriter, r *http.Request) {
	var in UserListRequest
	if err := s.codec.Decode(r, &in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	if err := s.codec.Validate(&in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	out, err := s.server.List(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	s.codec.Encode(w, r, out)
	return
}

func (s *UserService) Status(w http.ResponseWriter, r *http.Request) {
	var in UserStatusRequest
	if err := s.codec.Decode(r, &in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	if err := s.codec.Validate(&in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	_, err := s.server.Status(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	return
}

func (s *UserService) LoginUser(w http.ResponseWriter, r *http.Request) {
	var in emptypb.Empty

	out, err := s.server.LoginUser(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	s.codec.Encode(w, r, out)
	return
}
