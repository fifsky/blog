// Code generated by protoc-gen-go-http. DO NOT EDIT.
// versions:
// protoc-gen-go-http v0.0.1

package apiv1

import (
	context "context"
	contract "github.com/goapt/grpc-http/contract"
	http "net/http"
)

// This is a compile-time assertion to ensure that this generated file
// is compatible with the kratos package it is being compiled against.
// context.contract.http.

// TravelService 提供旅行足迹相关的接口
type TravelServiceHTTPServer interface {
	// GetFootprints 获取足迹数据（省份和城市）
	GetFootprints(context.Context, *GetFootprintsRequest) (*GetFootprintsResponse, error)
	// ListCityPhotos 根据城市获取照片列表
	ListCityPhotos(context.Context, *ListCityPhotosRequest) (*ListCityPhotosResponse, error)
}

type TravelService struct {
	server TravelServiceHTTPServer
	mux    contract.ServeMux
	codec  contract.Codec
}

func (s *TravelService) RegisterService() {
	s.mux.HandleFunc("POST /blog/travel/footprints", s.GetFootprints)
	s.mux.HandleFunc("POST /blog/travel/photos", s.ListCityPhotos)
}

func RegisterTravelServiceHTTPServer(mux contract.ServeMux, codec contract.Codec, srv TravelServiceHTTPServer) {
	s := &TravelService{
		server: srv,
		mux:    mux,
		codec:  codec,
	}
	s.RegisterService()
}

func (s *TravelService) GetFootprints(w http.ResponseWriter, r *http.Request) {
	var in GetFootprintsRequest
	if err := s.codec.Decode(r, &in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	if err := s.codec.Validate(&in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	out, err := s.server.GetFootprints(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	s.codec.Encode(w, r, out)
	return
}

func (s *TravelService) ListCityPhotos(w http.ResponseWriter, r *http.Request) {
	var in ListCityPhotosRequest
	if err := s.codec.Decode(r, &in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	if err := s.codec.Validate(&in); err != nil {
		s.codec.Encode(w, r, err)
		return
	}

	out, err := s.server.ListCityPhotos(r.Context(), &in)
	if err != nil {
		s.codec.Encode(w, r, err)
		return
	}
	s.codec.Encode(w, r, out)
	return
}
